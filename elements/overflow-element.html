<dom-module id="overflow-element">
<template>   
        <paper-item on-tap="_handleOverflowTap" value="profile">Profile</paper-item>
        <paper-item on-tap="_handleOverflowTap" value="changePassword">Change Password</paper-item>
        <paper-item on-tap="_handleOverflowTap" value="settings">Settings</paper-item>
        <paper-item on-tap="_handleOverflowTap" value="logout">Logout</paper-item>   
</template>
    
    <!--paper dialog template if logout is clicked-->
    <template if="{{}}">
        <paper-dialog   entry-animation="scale-up-animation"
                        exit-animation="fade-out-animation">
          <h2>Logout ?</h2>
          <paper-dialog-scrollable>
            Once logout you would be sent to login page.
          </paper-dialog-scrollable>
          <div class="buttons">
            <paper-button dialog-dismiss>Cancel</paper-button>
            <paper-button dialog-confirm>Accept</paper-button>
          </div>
        </paper-dialog>
    </template>
<script>
Polymer({
    is:"overflow-element",
    properties:
    {
        
    },
    _handleOverflowTap:function()
    {
       var selectedItem = event.target.getAttribute("value")
        if(selectedItem=="profile")
           {
              
           }
         if(selectedItem=="changePassword")
           {
                
           }
         if(selectedItem=="settings")
           {
               
           }
         if(selectedItem=="logout")
           {
               var requestData = {
                   "authToken":localStorage.getItem("accessToken")
                   
                };
                //console.log(localStorage.getItem("accessToken"));
              $.ajax({
                url: "http://10.90.21.43:8888/logout-service/logout",                
                type: "POST",
                data: JSON.stringify(requestData),
                contentType: 'application/json; charset=utf-8',
                beforeSend: function(xhr){xhr.setRequestHeader('AccessToken',localStorage.getItem("accessToken"));},
                success: function(object)
                { 
                    localStorage.setItem("accessToken",0);
                    console.log(localStorage.getItem("accessToken"));
                    window.location.href="../index.html";     
                }
             });
           }
    }
    
})    
</script>
</dom-module>